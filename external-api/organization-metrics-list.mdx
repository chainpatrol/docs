---
title: Get Organization Metrics
openapi: "GET /organization/metrics"
---

## Overview

Retrieve security metrics for your organization, including threat detections, blocked assets, takedowns, and more. This endpoint provides comprehensive analytics about your organization's security posture. The organization is automatically inferred from your API key.

## Quick Start

### Authentication

Include your API key in the `X-API-KEY` header:

```bash
X-API-KEY: your_api_key_here
```

### Example Request

<CodeGroup>

```typescript TypeScript
const response = await fetch(
  "https://app.chainpatrol.io/api/v2/organization/metrics?startDate=2024-01-01T00:00:00Z&endDate=2024-12-31T23:59:59Z",
  {
    method: "GET",
    headers: {
      "X-API-KEY": "YOUR_API_KEY_HERE",
    },
  }
);

const data = await response.json();
console.log(data.metrics);
```

```javascript JavaScript
const response = await fetch(
  "https://app.chainpatrol.io/api/v2/organization/metrics?startDate=2024-01-01T00:00:00Z&endDate=2024-12-31T23:59:59Z",
  {
    method: "GET",
    headers: {
      "X-API-KEY": "YOUR_API_KEY_HERE",
    },
  }
);

const data = await response.json();
console.log(data.metrics);
```

```python Python
import requests

response = requests.get(
    "https://app.chainpatrol.io/api/v2/organization/metrics",
    headers={
        "X-API-KEY": "YOUR_API_KEY_HERE",
    },
    params={
        "startDate": "2024-01-01T00:00:00Z",
        "endDate": "2024-12-31T23:59:59Z",
    },
)

data = response.json()
print(data["metrics"])
```

```bash cURL
curl -X GET 'https://app.chainpatrol.io/api/v2/organization/metrics?startDate=2024-01-01T00:00:00Z&endDate=2024-12-31T23:59:59Z' \
  -H 'X-API-KEY: YOUR_API_KEY_HERE'
```

</CodeGroup>

## Query Parameters

| Parameter | Type   | Required | Description                                                |
| --------- | ------ | -------- | ---------------------------------------------------------- |
| startDate | string | No       | Start date for metrics (ISO 8601 format). Defaults to beginning of time if not provided. |
| endDate   | string | No       | End date for metrics (ISO 8601 format). Defaults to current date if not provided.        |

## Response

### Success Response

```json
{
  "metrics": {
    "reportsCount": 150,
    "threatsBlockedCount": 245,
    "threatsBlockedByAssetType": [
      {
        "assetType": "URL",
        "count": 120
      },
      {
        "assetType": "ADDRESS",
        "count": 85
      },
      {
        "assetType": "TWITTER",
        "count": 40
      }
    ],
    "domainsBlockedCount": 78,
    "totalTakedownsFiledCount": 45,
    "totalTakedownsCompletedCount": 32,
    "totalDetections": 1250
  }
}
```

### Response Fields

| Field                                  | Type   | Description                                                |
| -------------------------------------- | ------ | ---------------------------------------------------------- |
| metrics                                | object | Metrics object containing all security statistics          |
| metrics.reportsCount                   | number | Total number of reports submitted                          |
| metrics.threatsBlockedCount            | number | Total number of threats blocked across all asset types     |
| metrics.threatsBlockedByAssetType      | array  | Breakdown of blocked threats by asset type                 |
| metrics.threatsBlockedByAssetType[].assetType | string | Type of asset (URL, ADDRESS, TWITTER, etc.)       |
| metrics.threatsBlockedByAssetType[].count     | number | Number of threats blocked for this asset type     |
| metrics.domainsBlockedCount            | number | Number of unique domains blocked                           |
| metrics.totalTakedownsFiledCount       | number | Total number of takedown requests filed                    |
| metrics.totalTakedownsCompletedCount   | number | Total number of takedowns successfully completed           |
| metrics.totalDetections                | number | Total number of threat detections                          |

## Use Cases

### Get All-Time Metrics

Retrieve metrics for your organization's entire history:

```typescript
const response = await fetch(
  "https://app.chainpatrol.io/api/v2/organization/metrics",
  {
    headers: { "X-API-KEY": "YOUR_API_KEY_HERE" },
  }
);

const { metrics } = await response.json();
console.log(`Total threats blocked: ${metrics.threatsBlockedCount}`);
```

### Get Monthly Metrics

```typescript
async function getMonthlyMetrics(year: number, month: number) {
  const startDate = new Date(year, month - 1, 1);
  const endDate = new Date(year, month, 0, 23, 59, 59);

  const response = await fetch(
    `https://app.chainpatrol.io/api/v2/organization/metrics?startDate=${startDate.toISOString()}&endDate=${endDate.toISOString()}`,
    {
      headers: { "X-API-KEY": "YOUR_API_KEY_HERE" },
    }
  );

  const { metrics } = await response.json();
  return metrics;
}

// Get metrics for January 2024
const janMetrics = await getMonthlyMetrics(2024, 1);
console.log("January 2024 metrics:", janMetrics);
```

### Compare Time Periods

```typescript
async function compareMetrics(period1Start: string, period1End: string, period2Start: string, period2End: string) {
  const [period1Response, period2Response] = await Promise.all([
    fetch(
      `https://app.chainpatrol.io/api/v2/organization/metrics?startDate=${period1Start}&endDate=${period1End}`,
      { headers: { "X-API-KEY": "YOUR_API_KEY_HERE" } }
    ),
    fetch(
      `https://app.chainpatrol.io/api/v2/organization/metrics?startDate=${period2Start}&endDate=${period2End}`,
      { headers: { "X-API-KEY": "YOUR_API_KEY_HERE" } }
    ),
  ]);

  const period1 = await period1Response.json();
  const period2 = await period2Response.json();

  const change = {
    reportsCount: period2.metrics.reportsCount - period1.metrics.reportsCount,
    threatsBlocked: period2.metrics.threatsBlockedCount - period1.metrics.threatsBlockedCount,
    detections: period2.metrics.totalDetections - period1.metrics.totalDetections,
  };

  console.log("Period-over-period change:", change);
  return change;
}
```

### Analyze Threat Distribution

```typescript
async function analyzeThreats() {
  const response = await fetch(
    "https://app.chainpatrol.io/api/v2/organization/metrics",
    {
      headers: { "X-API-KEY": "YOUR_API_KEY_HERE" },
    }
  );

  const { metrics } = await response.json();

  // Calculate percentages by asset type
  const total = metrics.threatsBlockedCount;
  const distribution = metrics.threatsBlockedByAssetType.map((item) => ({
    assetType: item.assetType,
    count: item.count,
    percentage: ((item.count / total) * 100).toFixed(2),
  }));

  console.log("Threat distribution:", distribution);
  return distribution;
}
```

### Generate Security Dashboard

```typescript
async function generateDashboard(days: number = 30) {
  const endDate = new Date();
  const startDate = new Date();
  startDate.setDate(startDate.getDate() - days);

  const response = await fetch(
    `https://app.chainpatrol.io/api/v2/organization/metrics?startDate=${startDate.toISOString()}&endDate=${endDate.toISOString()}`,
    {
      headers: { "X-API-KEY": "YOUR_API_KEY_HERE" },
    }
  );

  const { metrics } = await response.json();

  const dashboard = {
    period: `Last ${days} days`,
    summary: {
      totalReports: metrics.reportsCount,
      threatsBlocked: metrics.threatsBlockedCount,
      detections: metrics.totalDetections,
      takedownSuccessRate: 
        metrics.totalTakedownsFiledCount > 0
          ? ((metrics.totalTakedownsCompletedCount / metrics.totalTakedownsFiledCount) * 100).toFixed(1) + "%"
          : "N/A",
    },
    topThreats: metrics.threatsBlockedByAssetType
      .sort((a, b) => b.count - a.count)
      .slice(0, 3),
  };

  return dashboard;
}

// Usage
const dashboard = await generateDashboard(30);
console.log("Security Dashboard:", dashboard);
```

### Export Metrics Report

```typescript
async function exportMetricsReport(startDate: string, endDate: string) {
  const response = await fetch(
    `https://app.chainpatrol.io/api/v2/organization/metrics?startDate=${startDate}&endDate=${endDate}`,
    {
      headers: { "X-API-KEY": "YOUR_API_KEY_HERE" },
    }
  );

  const { metrics } = await response.json();

  const report = `
Security Metrics Report
Period: ${startDate} to ${endDate}
Generated: ${new Date().toISOString()}

Overview:
- Reports Submitted: ${metrics.reportsCount}
- Threats Blocked: ${metrics.threatsBlockedCount}
- Domains Blocked: ${metrics.domainsBlockedCount}
- Total Detections: ${metrics.totalDetections}

Takedowns:
- Filed: ${metrics.totalTakedownsFiledCount}
- Completed: ${metrics.totalTakedownsCompletedCount}
- Success Rate: ${((metrics.totalTakedownsCompletedCount / metrics.totalTakedownsFiledCount) * 100).toFixed(1)}%

Threats by Asset Type:
${metrics.threatsBlockedByAssetType
  .map((item) => `- ${item.assetType}: ${item.count}`)
  .join("\n")}
  `;

  return report;
}
```

## Error Responses

### 401 Unauthorized

Returned when the API key is missing, invalid, or doesn't have organization access:

```json
{
  "error": {
    "code": "UNAUTHORIZED",
    "message": "API key with organization access required"
  }
}
```

### 400 Bad Request

Returned when query parameters are invalid:

```json
{
  "error": {
    "code": "BAD_REQUEST",
    "message": "Invalid date format. Use ISO 8601 format."
  }
}
```

## Best Practices

### Date Ranges
- Always use ISO 8601 format for dates: `YYYY-MM-DDTHH:mm:ss.sssZ`
- Include timezone information (typically UTC with `Z` suffix)
- Omit both dates to get all-time metrics
- Use consistent date ranges when comparing periods

### Performance
- Cache metrics data with appropriate TTL (e.g., 1 hour for dashboards)
- Use date filters to query specific time periods rather than filtering client-side
- Consider scheduling periodic metric snapshots for historical tracking

### Analysis
- Compare metrics across different time periods to identify trends
- Monitor the takedown success rate to assess enforcement effectiveness
- Track threats by asset type to understand attack patterns

## Notes

- Organization is automatically determined from your API key
- All timestamps are in ISO 8601 format with UTC timezone
- If no date range is provided, all-time metrics are returned
- Metrics are calculated in real-time based on the specified date range
- The `threatsBlockedByAssetType` array includes all asset types that have blocked threats
